{"ast":null,"code":"const API_BASE_URL = 'http://35.180.69.130:3000/api';\nconst apiService = {\n  electionreg: async (UserID, UniqueCode, token) => {\n    const Authorization = token; // Make sure the token is formatted correctly\n    console.log(UserID, UniqueCode, Authorization);\n    try {\n      const response = await fetch(`${API_BASE_URL}/addusertoUsersElections`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          // This is not needed for a POST request\n          'Authorization': Authorization\n        },\n        body: JSON.stringify({\n          UserID,\n          UniqueCode\n        }),\n        credentials: 'include' // Include credentials (cookies, etc.)\n      });\n      if (!response.ok) {\n        throw new Error('Failed to register user to election');\n      }\n      const data = await response.json();\n      console.log('Registry to election successful');\n      // Adjust based on your server's requirements\n    } catch (error) {\n      console.error('Failed to register user to election:', error);\n      throw error;\n    }\n  },\n  electioncreate: async (title, description, startDate, endDate, adminID, token) => {\n    const Authorization = token; // Make sure the token is formatted correctly\n    console.log(title, description, startDate, endDate, adminID);\n    try {\n      const response = await fetch(`${API_BASE_URL}/createelection`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          // This is not needed for a POST request\n          'Authorization': Authorization\n        },\n        body: JSON.stringify({\n          title,\n          description,\n          startDate,\n          endDate,\n          adminID\n        }),\n        credentials: 'include' // Include credentials (cookies, etc.)\n      });\n      if (!response.ok) {\n        throw new Error('Failed to create election');\n      }\n      const data = await response.json();\n      console.log('Election created successfully');\n      // Adjust based on your server's requirements\n    } catch (error) {\n      console.error('Failed to create election:', error);\n      throw error;\n    }\n  },\n  getelections: async (userid, token) => {\n    const Authorization = token;\n    const id = userid;\n    try {\n      const response = await fetch(`${API_BASE_URL}/userelections/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Authorization': Authorization\n        },\n        credentials: 'include'\n      });\n      if (!response.ok) {\n        throw new Error('Failed to get elections');\n      }\n      const data = await response.json();\n\n      // Ensure data is an array before storing in localStorage\n      if (Array.isArray(data)) {\n        const jsondata = JSON.stringify(data);\n        localStorage.setItem('data', jsondata);\n        console.log('Elections fetched successfully');\n        console.log(data);\n      } else {\n        console.error('Invalid data format received from the server:', data);\n        // You may want to handle this case differently based on your requirements\n      }\n    } catch (error) {\n      console.error('Failed to get elections:', error);\n      throw error;\n    }\n  }\n};\nexport default apiService;","map":{"version":3,"names":["API_BASE_URL","apiService","electionreg","UserID","UniqueCode","token","Authorization","console","log","response","fetch","method","headers","body","JSON","stringify","credentials","ok","Error","data","json","error","electioncreate","title","description","startDate","endDate","adminID","getelections","userid","id","Array","isArray","jsondata","localStorage","setItem"],"sources":["/home/tofi-machine/Documents/VotingApp/Frontend/VotingApp-Frontend/src/apiService.js"],"sourcesContent":["const API_BASE_URL = 'http://35.180.69.130:3000/api';\n\nconst apiService = {\n  electionreg: async (UserID, UniqueCode, token) => {\n    const Authorization = token; // Make sure the token is formatted correctly\n    console.log(UserID, UniqueCode, Authorization);\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/addusertoUsersElections`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*', // This is not needed for a POST request\n          'Authorization': Authorization,\n        },\n        body: JSON.stringify({ UserID, UniqueCode }),\n        credentials: 'include', // Include credentials (cookies, etc.)\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to register user to election');\n      }\n\n      const data = await response.json();\n      console.log('Registry to election successful');\n      // Adjust based on your server's requirements\n    } catch (error) {\n      console.error('Failed to register user to election:', error);\n      throw error;\n    }\n  },\n\n  electioncreate: async (title, description, startDate, endDate, adminID, token) => {\n    const Authorization = token; // Make sure the token is formatted correctly\n    console.log(title, description, startDate, endDate, adminID);\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/createelection`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*', // This is not needed for a POST request\n          'Authorization': Authorization,\n        },\n        body: JSON.stringify({ title, description, startDate, endDate, adminID }),\n        credentials: 'include', // Include credentials (cookies, etc.)\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to create election');\n      }\n\n      const data = await response.json();\n      console.log('Election created successfully');\n      // Adjust based on your server's requirements\n    } catch (error) {\n      console.error('Failed to create election:', error);\n      throw error;\n    }\n  \n  },\n\n  getelections: async (userid, token) => {\n    const Authorization = token;\n    const id = userid;\n  \n    try {\n      const response = await fetch(`${API_BASE_URL}/userelections/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Authorization': Authorization,\n        },\n        credentials: 'include',\n      });\n  \n      if (!response.ok) {\n        throw new Error('Failed to get elections');\n      }\n  \n      const data = await response.json();\n  \n      // Ensure data is an array before storing in localStorage\n      if (Array.isArray(data)) {\n        const jsondata = JSON.stringify(data);\n        localStorage.setItem('data', jsondata);\n        console.log('Elections fetched successfully');\n        console.log(data);\n      } else {\n        console.error('Invalid data format received from the server:', data);\n        // You may want to handle this case differently based on your requirements\n      }\n  \n    } catch (error) {\n      console.error('Failed to get elections:', error);\n      throw error;\n    }\n  }\n};\n\nexport default apiService;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}